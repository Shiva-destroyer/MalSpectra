#!/usr/bin/env python3
"""
MalSpectra - Safe Test Malware
A harmless script that mimics malware behavior for testing purposes

Developer: Sai Srujan Murthy
Email: saisrujanmurthy@gmail.com

THIS IS NOT REAL MALWARE - IT'S A SAFE TEST SCRIPT
"""

import time
import os
import sys
from pathlib import Path

def main():
    """Simulated malware behavior (100% safe)."""
    
    print("=== Safe Test Malware ===")
    print("This script simulates malware behavior without causing harm.\n")
    
    # Simulate file creation
    print("[1] Creating suspicious files...")
    test_files = [
        "infected.txt",
        "malware_payload.dat",
        "crypto_locker.bin"
    ]
    
    for filename in test_files:
        with open(filename, 'w') as f:
            f.write(f"Test content from safe malware simulation: {filename}\n")
            f.write("Created at: " + time.strftime("%Y-%m-%d %H:%M:%S") + "\n")
        print(f"  ✓ Created: {filename}")
    
    time.sleep(1)
    
    # Simulate file modification
    print("\n[2] Modifying files...")
    if os.path.exists("infected.txt"):
        with open("infected.txt", 'a') as f:
            f.write("\nAdditional malicious payload (simulated)\n")
        print("  ✓ Modified: infected.txt")
    
    time.sleep(1)
    
    # Simulate process spawning
    print("\n[3] Spawning child processes...")
    print("  ✓ Simulated: Would spawn persistence service")
    print("  ✓ Simulated: Would spawn keylogger process")
    
    time.sleep(1)
    
    # Simulate network activity (just print, don't actually connect)
    print("\n[4] Simulating network connections...")
    print("  ✓ Simulated: Connection to C&C server at 192.0.2.1:4444")
    print("  ✓ Simulated: Data exfiltration to evil.example.com:8080")
    
    time.sleep(1)
    
    # Clean up (good malware cleans up after itself in testing!)
    print("\n[5] Cleaning up test files...")
    for filename in test_files:
        if os.path.exists(filename):
            os.remove(filename)
            print(f"  ✓ Removed: {filename}")
    
    print("\n=== Test Complete ===")
    print("No harm done! This was just a simulation.")
    print("The sandbox should have detected:")
    print("  - File creation/modification")
    print("  - Process activity")
    print("  - (Simulated) network connections")

if __name__ == "__main__":
    main()
